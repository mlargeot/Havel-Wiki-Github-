# Edit

## Summary

- [1. Purpose of the Feature](#1.-purpose-of-the-feature)
- [2. Roles and Permissions](#2.-roles-and-permissions)
- [3. Editable Fields](3.-editable-fields)
- [4. Non-Editable Fields](#4.-non-editable-fields)
- [5. Edit Workflow](#5.-edit-workflow)
	- [5.1 Accessing the Edit Mode](#5.1-accessing-the-edit-mode)
	- [5.2 Editing Process](#5.2-editing-process)
	- [5.3 Post-Edit Actions](5.3-post-edit-actions)
- [6. Validation Rules](#6.-validation-rules)
	- [6.1 Mandatory Validation](#6.1-mandatory-validation)
	- [6.2 Deployment Validation](#6.2-deployment-validation)
	- [6.3 State Constraints](#6.3-state-constraints)
- [7. Versioning and Traceability](#7.-versioning-and-traceability)
- [8. UI Requirements](#8.-ui-requirements)
	- [8.1 Edit Form Layout](#8.1-edit-form-layout)
	- [8.2 Inline Validation](#8.2-inline-validation)
	- [8.3 Version History Panel](#8.3-version-history-panel)
- [9. Errors and Constraints](#9.-errors-and-constraints)
- [10. Success Criteria](#10.-success-criteria)

## 1. Purpose of the Feature

The **Edit Challenge** feature allows authorized users to update or revise the metadata, scoring, files, and deployment configuration of a **challenge that exists inside a specific event**.

This feature ensures:

- Challenges can evolve and improve during event preparation
- Mistakes can be corrected
- Challenge versions remain traceable
- Edits remain safe and controlled while preserving event integrity

Challenges **cannot** be edited globally or across events.  
All edits apply **only** to the challenge instance within its event.

## 2. Roles and Permissions

|Role|Edit Permissions|
|---|---|
|**Administrator**|Full edit access to all challenges in the event.|
|**Challenge Creator**|Can edit only challenges they created. Cannot delete without admin approval.|
|**Event Organizer**|Can adjust scoring, visibility, and event-specific attributes.|
|**Participant**|No edit access.|

## 3. Editable Fields

The following fields may be edited at any time **before the event is active** and **as drafts** during event preparation:

### General Metadata

- Title
- Category
- Difficulty
- Description
- Tags
- Estimated solving time

### Scoring

- Scoring type (static or dynamic)
- Initial points
- Hint penalties
- Flag format

### Challenge Files

- Add/remove downloadable files
- Replace outdated files

### Deployment and Environment-Specific Fields

Depending on the challenge type (see 4.2):

- Container/VM parameters
- Network topology for Network Challenges
- Resource settings (if defined at functional level)

### Visibility

- Visible / Invisible

## 4. Non-Editable Fields

Some fields are **fixed once the challenge is created**, ensuring structural integrity.

|Field|Reason|
|---|---|
|**Challenge ID**|System identity inside the event.|
|**Deployment Type**|Cannot shift from Q&A to container/VM/network.|
|**Creator Identity**|Accountability and version traceability.|
|**Event Binding**|Challenge cannot be moved to another event.|

If a major transformation is needed (e.g., changing a Container challenge into a VM challenge), the recommended workflow is:

➡ **Duplicate challenge** → Modify new one → Delete old one  
(_Deletion controlled by admin — see 4.4 Delete_)

## 5. Edit Workflow

### 5.1 Accessing the Edit Mode

1. User navigates to **Event Dashboard → Challenges**.
2. User selects the challenge they want to modify.
3. User clicks **"Edit"** to access the editable form.

### 5.2 Editing Process

1. User modifies metadata fields.
2. The system performs **real-time validation** for required fields.
3. User saves changes:
    - “Save Draft” (keep unpublished)
    - “Save & Validate”

### 5.3 Post-Edit Actions

- System updates challenge metadata
- A new **version entry** is added to the version history
- Event administrators receive an optional notification for review

## 6. Validation Rules

To ensure event integrity, the following rules apply to edits:

### 6.1 Mandatory Validation

- Title must remain unique inside the event
- Required metadata must be filled

### 6.2 Deployment Validation

Depends on the challenge type:

- Container challenges → must still start successfully
- VM challenges → must boot and remain reachable
- Network challenges → all nodes must connect correctly

> **Note:** This validation occurs only if assets that affect the deployment are edited (VM files, network topology, ...), otherwise it will be validated by default.

### 6.3 State Constraints

A challenge **cannot** be considered as edited if:

- Mandatory metadata is missing
- Deployment fails

## 7. Versioning and Traceability

Whenever a challenge is edited, a new version entry is created
Version includes:

- Timestamp
- Editor identity
- Summary of changes

Users can view a full **version history**.

### Versioning Behavior

| Action                       | Version Created? |
| ---------------------------- | ---------------- |
| Update metadata              | ✔                |
| Add/remove files             | ✔                |
| Change scoring               | ✔                |
| Update deployment parameters | ✔                |
| Change visibility            | ✘                |

## 8. UI Requirements

### 8.1 Edit Form Layout

The UI must present a structured, intuitive form grouped into sections:

- **General Information**
- **Scoring & Flags**
- **Files**
- **Deployment Settings** (type-specific)
- **Hints**
- **Version History**

### 8.2 Inline Validation

- Highlight missing mandatory fields
- Warn when removing files
- Warn when deployment settings conflict with challenge type

### 8.3 Version History Panel

- Timeline of edits
- “View Changes” option

## 9. Errors & Constraints

| Error / Constraint           | System Behavior                                 |
| ---------------------------- | ----------------------------------------------- |
| Missing required fields      | Prevent save; show error.                       |
| Removing files               | Warning + require confirmation.                 |
| Deployment validation failed | Block challenge activation.                     |
| Unauthorized access          | Display access-denied message + log attempt.    |

## 10. Success Criteria

|Criterion|Expected Result|
|---|---|
|Edits successfully saved|All validations pass and metadata updates correctly.|
|Version history complete|Every modification recorded.|
|Event isolation preserved|No impact on challenges outside the current event.|
|No broken deployments|Deployment validations maintained after edits.|
|Usable interface|Editing process takes < 2 minutes on average.|
